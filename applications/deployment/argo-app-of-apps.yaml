##############
# ðŸ›Ž Argo App of Apps
#############
allowed_destinations: &allowed_destinations
  - namespace: labs-ci-cd
    server: https://kubernetes.default.svc
  - namespace: labs-dev
    server: https://kubernetes.default.svc
  - namespace: labs-test
    server: https://kubernetes.default.svc

argocd_projects:
- enabled: true
  name: pet-battle-suite
  destinations: *allowed_destinations

applications:
  pet_battle_suite:
    name: pet-battle-suite
    enabled: true
    destination: labs-ci-cd
    source: https://github.com/eformat/pb-ci-cd.git
    source_path: applications/deployment
    source_ref: main
    sync_policy_automated: true
    helm_values:
      - values-applications.yaml
    values:
      applications:
        pet_battle_dev:
          enabled: true
          source_ref: master
          image_version: master
        pet_battle_test:
          enabled: true
          source_ref: master
          image_version: master
        pet_battle_api_dev:
          enabled: true
          source_ref: main
          image_version: main
        pet_battle_api_test:
          enabled: true
          source_ref: main
          image_version: main
        pet_battle_tournament_dev:
          enabled: true
          source_ref: master
          image_version: master
        pet_battle_tournament_test:
          enabled: true
          source_ref: master
          image_version: master
    project:
      name: pet-battle-suite
      enabled: true